{"ast":null,"code":"import _toConsumableArray from\"/Users/jerome/Desktop/dev/mesto-react-main/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/Users/jerome/Desktop/dev/mesto-react-main/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from'react';import Header from'./Header';import Main from'./Main';import Footer from'./Footer';import PopupUpdateAvatar from'./PopupUpdateAvatar';import PopupEditProfile from'./PopupEditProfile';import PopupAddCard from'./PopupAddCard';import ImagePopup from'./ImagePopup';import api from\"../utils/Api\";import{CurrentUserContext}from\"../contexts/CurrentUserContext\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),isEditAvatarPopupOpen=_React$useState2[0],setIsEditAvatarPopupOpen=_React$useState2[1];var _React$useState3=React.useState(false),_React$useState4=_slicedToArray(_React$useState3,2),isEditProfilePopupOpen=_React$useState4[0],setIsEditProfilePopupOpen=_React$useState4[1];var _React$useState5=React.useState(false),_React$useState6=_slicedToArray(_React$useState5,2),isAddPlacePopupOpen=_React$useState6[0],setIsAddPlacePopupOpen=_React$useState6[1];var _React$useState7=React.useState({}),_React$useState8=_slicedToArray(_React$useState7,2),selectedCard=_React$useState8[0],setSelectedCard=_React$useState8[1];var _React$useState9=React.useState({}),_React$useState10=_slicedToArray(_React$useState9,2),currentUser=_React$useState10[0],setCurrentUser=_React$useState10[1];var _React$useState11=React.useState([]),_React$useState12=_slicedToArray(_React$useState11,2),cards=_React$useState12[0],setCards=_React$useState12[1];React.useEffect(function(){api.getCardsData().then(function(data){setCards(data);}).catch(function(err){console.log(err);});},[]);function handleCardLike(card){var isLiked=card.likes.some(function(i){return i._id===currentUser._id;});api.changeLikeCardStatus(card._id,!isLiked).then(function(newCard){setCards(function(state){return state.map(function(c){return c._id===card._id?newCard:c;});});}).catch(function(err){console.log(err);});}function handleCardDelete(card){api.deleteCard(card._id).then(function(){var newCard=cards.filter(function(c){return c!==card;});setCards(newCard);}).catch(function(err){console.log(err);});}React.useEffect(function(){api.getUserData().then(function(data){setCurrentUser(data);}).catch(function(err){console.log(err);});},[]);function handleEditAvatarClick(){setIsEditAvatarPopupOpen(true);}function handleEditProfileClick(){setIsEditProfilePopupOpen(true);}function handleAddPlaceClick(){setIsAddPlacePopupOpen(true);}function closeAllPopups(){setIsEditAvatarPopupOpen(false);setIsEditProfilePopupOpen(false);setIsAddPlacePopupOpen(false);setSelectedCard({isOpen:false});}function handleCardClick(card){card.isOpen=!card.isOpen;setSelectedCard(card);}function handleUpdateUser(_ref){var name=_ref.name,about=_ref.about;api.updateUserData({name:name,about:about}).then(function(data){setCurrentUser(data);closeAllPopups();}).catch(function(err){console.log(err);});}function handleUpdateAvatar(_ref2){var avatar=_ref2.avatar;api.updateAvatar(avatar).then(function(data){setCurrentUser(data);closeAllPopups();}).catch(function(err){console.log(err);});}function handleAddPlaceSubmit(_ref3){var name=_ref3.name,link=_ref3.link;api.addCard({name:name,link:link}).then(function(newCard){setCards([newCard].concat(_toConsumableArray(cards)));closeAllPopups();}).catch(function(err){console.log(err);});}return/*#__PURE__*/_jsx(CurrentUserContext.Provider,{value:currentUser,children:/*#__PURE__*/_jsxs(\"div\",{className:\"page\",children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(Main,{onEditProfile:handleEditProfileClick,onAddPlace:handleAddPlaceClick,onEditAvatar:handleEditAvatarClick,onCardClick:handleCardClick,cards:cards,onCardLike:handleCardLike,onCardDelete:handleCardDelete}),/*#__PURE__*/_jsx(PopupUpdateAvatar,{isOpen:isEditAvatarPopupOpen,onClose:closeAllPopups,onUpdateUser:handleUpdateAvatar,buttonText:\"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\"}),/*#__PURE__*/_jsx(PopupEditProfile,{isOpen:isEditProfilePopupOpen,onClose:closeAllPopups,onUpdateUser:handleUpdateUser,buttonText:\"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\"}),/*#__PURE__*/_jsx(PopupAddCard,{isOpen:isAddPlacePopupOpen,onClose:closeAllPopups,onAddPlace:handleAddPlaceSubmit,buttonText:\"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\"}),/*#__PURE__*/_jsx(ImagePopup,{card:selectedCard,onClose:closeAllPopups}),/*#__PURE__*/_jsx(Footer,{})]})});}export default App;","map":{"version":3,"sources":["/Users/jerome/Desktop/dev/mesto-react-main/src/components/App.js"],"names":["React","Header","Main","Footer","PopupUpdateAvatar","PopupEditProfile","PopupAddCard","ImagePopup","api","CurrentUserContext","App","useState","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","selectedCard","setSelectedCard","currentUser","setCurrentUser","cards","setCards","useEffect","getCardsData","then","data","catch","err","console","log","handleCardLike","card","isLiked","likes","some","i","_id","changeLikeCardStatus","newCard","state","map","c","handleCardDelete","deleteCard","filter","getUserData","handleEditAvatarClick","handleEditProfileClick","handleAddPlaceClick","closeAllPopups","isOpen","handleCardClick","handleUpdateUser","name","about","updateUserData","handleUpdateAvatar","avatar","updateAvatar","handleAddPlaceSubmit","link","addCard"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Header from './Header'\nimport Main from './Main'\nimport Footer from './Footer';\nimport PopupUpdateAvatar from './PopupUpdateAvatar';\nimport PopupEditProfile from './PopupEditProfile';\nimport PopupAddCard from './PopupAddCard';\nimport ImagePopup from './ImagePopup';\nimport api from \"../utils/Api\";\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\"\n\n\nfunction App() {\n\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = React.useState(false);\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = React.useState(false);\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false);\n  const [selectedCard, setSelectedCard] = React.useState({});\n  const [currentUser, setCurrentUser] = React.useState({});\n  const [cards, setCards] = React.useState([]);\n\n\n  React.useEffect(() => {\n    api.getCardsData()\n      .then((data) => {\n        setCards(data)\n      })\n      .catch((err) => {\n        console.log(err)\n      })\n  }, [])\n\n  function handleCardLike(card) {\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\n\n    api.changeLikeCardStatus(card._id, !isLiked)\n      .then((newCard) => {\n        setCards((state) => state.map((c) => c._id === card._id ? newCard : c));\n      })\n      .catch((err) => {\n        console.log(err)\n      });\n  }\n\n\n  function handleCardDelete(card) {\n    api.deleteCard(card._id)\n      .then(() => {\n        const newCard = cards.filter((c) => c !== card);\n        setCards(newCard)\n      })\n      .catch((err) => {\n        console.log(err)\n      });\n  }\n\n\n\n  React.useEffect(() => {\n    api.getUserData()\n      .then((data) => {\n        setCurrentUser(data)\n      })\n      .catch((err) => {\n        console.log(err)\n      })\n  }, []\n  )\n\n\n  function handleEditAvatarClick() {\n    setIsEditAvatarPopupOpen(true)\n  }\n\n  function handleEditProfileClick() {\n    setIsEditProfilePopupOpen(true)\n  }\n\n  function handleAddPlaceClick() {\n    setIsAddPlacePopupOpen(true)\n  }\n\n  function closeAllPopups() {\n    setIsEditAvatarPopupOpen(false);\n    setIsEditProfilePopupOpen(false);\n    setIsAddPlacePopupOpen(false);\n    setSelectedCard({ isOpen: false });\n  }\n\n  function handleCardClick(card) {\n    card.isOpen = !card.isOpen \n    setSelectedCard(card);\n  }\n\n  function handleUpdateUser({ name, about }) {\n    api.updateUserData({ name, about })\n      .then((data) => {\n        setCurrentUser(data)\n        closeAllPopups()\n      })\n      .catch((err) => {\n        console.log(err)\n      })\n\n  }\n\n  function handleUpdateAvatar({ avatar }) {\n    api.updateAvatar(avatar)\n      .then((data) => {\n        setCurrentUser(data)\n        closeAllPopups()\n      })\n      .catch((err) => {\n        console.log(err)\n      })\n  }\n\n  function handleAddPlaceSubmit({ name, link }) {\n    api.addCard({ name, link })\n      .then((newCard) => {\n        setCards([newCard, ...cards]);\n        closeAllPopups()\n      })\n      .catch((err) => {\n        console.log(err)\n      })\n  }\n\n\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n      <div className=\"page\">\n        <Header />\n        <Main \n          onEditProfile={handleEditProfileClick} \n          onAddPlace={handleAddPlaceClick} \n          onEditAvatar={handleEditAvatarClick} \n          onCardClick={handleCardClick} \n          cards={cards} \n          onCardLike={handleCardLike} \n          onCardDelete={handleCardDelete} />\n        <PopupUpdateAvatar \n          isOpen={isEditAvatarPopupOpen} \n          onClose={closeAllPopups} \n          onUpdateUser={handleUpdateAvatar} \n          buttonText=\"Сохранить\" />\n        <PopupEditProfile \n          isOpen={isEditProfilePopupOpen} \n          onClose={closeAllPopups} \n          onUpdateUser={handleUpdateUser} \n          buttonText=\"Сохранить\" />\n        <PopupAddCard \n          isOpen={isAddPlacePopupOpen} \n          onClose={closeAllPopups} \n          onAddPlace={handleAddPlaceSubmit} \n          buttonText=\"Сохранить\" />\n        <ImagePopup \n          card={selectedCard}\n           onClose={closeAllPopups} />\n        <Footer />\n      </div>\n    </CurrentUserContext.Provider>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}