{"version":3,"sources":["images/logo.svg","components/Header.js","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/Footer.js","components/PopupWithForm.js","components/PopupUpdateAvatar.js","components/PopupEditProfile.js","components/PopupAddCard.js","components/ImagePopup.js","utils/Api.js","components/RequireAuth.js","components/Login.js","components/Register.js","utils/auth.js","components/InfoTooltip.js","images/iconAppruve.svg","images/iconErr.svg","components/App.js","reportWebVitals.js","index.js"],"names":["Header","loggedIn","email","handleSignOut","location","useLocation","text","pathname","linkRoute","className","src","headerLogo","alt","to","style","color","onClick","CurrentUserContext","React","createContext","Card","props","currentUser","useContext","isOwn","card","owner","_id","cardDeleteButtonClassName","isLiked","likes","some","i","cardLikeButtonClassName","name","link","onCardClick","type","onCardDelete","onCardLike","length","Main","onEditProfile","onAddPlace","onEditAvatar","cards","backgroundImage","avatar","about","map","Footer","PopupWithForm","isOpen","onClose","onSubmit","handleSubmit","title","children","buttonText","PopupUpdateAvatar","onUpdateUser","avatarRef","useRef","useEffect","current","value","e","preventDefault","placeholder","ref","required","id","PopupEditProfile","useState","setName","description","setDescription","onChange","target","PopupAddCard","setLink","maxLength","ImagePopup","api","endpoint","headers","this","_endpoint","_headers","res","ok","json","Promise","reject","status","fetch","then","_resStatus","method","body","JSON","stringify","cardId","setLike","deleteLike","url","authorization","RequireAuth","Login","onLogin","setEmail","password","setPassword","evt","Register","onRegister","BASE_URL","InfoTooltip","messagePopup","icon","App","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","selectedCard","setSelectedCard","setCurrentUser","setCards","isInfoTooltipOpen","setIsTooltipOpen","setLoggedIn","setMessagePopup","jwt","localStorage","getItem","nav","useNavigate","handleInfoTooltipOpen","closeAllPopups","handleIsTooltipOpen","token","Accept","Authorization","data","catch","err","console","log","getUserData","getCardsData","Provider","removeItem","path","element","auth","iconAppruve","iconErr","setItem","exact","changeLikeCardStatus","newCard","state","c","deleteCard","filter","updateAvatar","updateUserData","addCard","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.2ec64b0b.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.03b78ada.svg\";","import React from \"react\";\nimport { Link, useLocation } from \"react-router-dom\";\nimport headerLogo from '../images/logo.svg'\n\nfunction Header({loggedIn, email, handleSignOut}) {\n    const location = useLocation()\n    const text = `${location.pathname === \"/sign-in\" ? \"Регистрация\" : \"Войти\"}`;\n    const linkRoute = `${location.pathname === \"/sign-in\" ? \"/sign-up\" : \"/sign-in\"}`;\n\n\n    return (\n        <header className=\"header\">\n            <img src={headerLogo} alt=\"Логотип Mesto\" className=\"header__logo\" />\n            <div className=\"header__block\">\n                {loggedIn ?  (\n                <>\n                    <p className=\"header__email\">{email}</p> \n                    <Link className=\"header__text\" to=\"/sign-in\" style={{color: \"#A9A9A9\"}} onClick={handleSignOut}>Выйти</Link> \n                </> )  :  (\n                <Link className=\"header__text\" to={linkRoute}>{text}</Link>\n                )}\n            </div>\n        </header>\n    )\n}\n\nexport default Header;\n","import React from 'react';\n\nexport const CurrentUserContext = React.createContext();","import React from \"react\";\nimport {CurrentUserContext} from \"../contexts/CurrentUserContext\";\n\nfunction Card(props) {\n\n    const currentUser = React.useContext(CurrentUserContext);\n\n   const isOwn = props.card.owner._id === currentUser._id;\n    const cardDeleteButtonClassName = (\n      `element__dlt ${isOwn ? 'element__dlt_active' : ''}`\n     ); \n\n      const isLiked = props.card.likes.some(i => i._id === currentUser._id);\n\n      // Создаём переменную, которую после зададим в `className` для кнопки лайка\n      const cardLikeButtonClassName = (\n        `element__like ${isLiked ? 'element__like_active' : ''}`\n      ); \n\n\n    function handleClick() {\n        props.onCardClick(props.card)\n    }\n\n    function handleLikeClick() {\n        props.onCardLike(props.card)\n    }\n\n    function handleDeleteClick() {\n        props.onCardDelete(props.card)\n    }\n\n    return (\n            <article className=\"element\">\n                <img className=\"element__img\" alt={props.name} src={props.link} onClick={handleClick} />\n                <button type=\"button\" className={cardDeleteButtonClassName} onClick={handleDeleteClick}>\n                </button>\n                <div className=\"element__group\">\n                    <h2 className=\"element__title\">{props.name}</h2>\n                    <div className=\"element__group-like\">\n                        <button type=\"button\" className={cardLikeButtonClassName} onClick={handleLikeClick}>\n                        </button>\n                        <p className=\"element__number-likes\">{props.likes.length}</p>\n                    </div>\n                </div>\n            </article>\n    )\n}\n\nexport default Card;","import React from \"react\";\nimport Card from './Card';\nimport {CurrentUserContext} from \"../contexts/CurrentUserContext\";\n\nfunction Main(props) {\n    const { onEditProfile, onAddPlace, onEditAvatar, onCardClick, cards, onCardLike, onCardDelete } = props;\n    const currentUser = React.useContext(CurrentUserContext);\n\n\n    return (\n        <main>\n            <section className=\"profile\">\n                <picture className=\"profile__avatar\" onClick={onEditAvatar}>\n                    <div className=\"profile__avatar-img\" style={{ backgroundImage: `url(${currentUser.avatar})` }}></div>\n                </picture>\n                <div className=\"profile__info\">\n                    <div className=\"profile__description\">\n                        <div className=\"profile__line\">\n                            <h1 className=\"profile__name\">{currentUser.name}</h1>\n                            <button type=\"button\" className=\"profile__edit\" aria-label=\"Кнопка редактирования профиля\" onClick={onEditProfile}>\n                            </button>\n                        </div>\n                        <p className=\"profile__job\">{currentUser.about}</p>\n                    </div>\n                    <button type=\"button\" className=\"profile__add-button\" onClick={onAddPlace}>\n                    </button>\n                </div>\n            </section>\n            <section className=\"elements\">\n                {cards.map((card) => {\n                    return (\n                        <Card \n                            name={card.name} \n                            link={card.link} \n                            likes={card.likes} \n                            key={card._id} \n                            onCardClick={onCardClick} \n                            card={card} \n                            onCardLike={onCardLike} \n                            onCardDelete={onCardDelete}/>\n                    )\n                })}\n            </section>\n\n        </main>\n    )\n}\n\nexport default Main;","import React from \"react\";\n\nfunction Footer() {\n    return (\n        <footer className=\"footer\">\n            <p className=\"footer__copyright\">&copy; 2020 Mesto Russia</p>\n        </footer>\n    )\n}\n\nexport default Footer;","import React from \"react\";\n\nfunction PopupWithForm(props) {\n\n    \n\n    return (\n        <div className={`popup popup_type_${props.name}  ${props.isOpen ? 'popup_open' : ''}`}>\n            <div className=\"popup__container\">\n                <button type=\"button\" className=\"popup__close\" onClick={props.onClose}></button>\n                <form className=\"form\" onSubmit={props.handleSubmit}>\n                    <h2 className=\"form__title\">{props.title}</h2>\n                    {props.children}\n                    <button type=\"submit\" className=\"form__submit\">{props.buttonText}</button>\n                </form>\n            </div>\n        </div>\n    )\n}\n\nexport default PopupWithForm;","import React from \"react\";\nimport PopupWithForm from \"./PopupWithForm\";\nimport {CurrentUserContext} from \"../contexts/CurrentUserContext\";\n\nfunction PopupUpdateAvatar({ isOpen, onClose, buttonText, onUpdateUser}) {\n    const currentUser = React.useContext(CurrentUserContext);\n    const avatarRef = React.useRef('');\n\n    function handleSubmit(e) {\n        e.preventDefault();\n      \n        onUpdateUser({\n          avatar: avatarRef.current.value\n        });\n      } \n   \n    \n      React.useEffect(() => {\n        avatarRef.current.value = currentUser.avatar;\n    }, [currentUser])\n\n    \n\n    return (\n        <PopupWithForm isOpen={isOpen} onClose={onClose} buttonText={buttonText} handleSubmit={handleSubmit} title=\"Обновить аватар\" name=\"update_avatar\">\n            <input type=\"url\" className=\"form__text\" name=\"url_avatar\" placeholder=\"Ссылка на аватар\" ref={avatarRef} required/>\n            <span className=\"form__error\" id=\"url_avatar-error\"></span>\n        </PopupWithForm>\n    )\n}\n\nexport default PopupUpdateAvatar;","import React from \"react\";\nimport PopupWithForm from \"./PopupWithForm\";\nimport {CurrentUserContext} from \"../contexts/CurrentUserContext\";\n\nfunction PopupEditProfile({ isOpen, onClose, buttonText, onUpdateUser }) {\n\n    const [name, setName] = React.useState('')\n    const [description, setDescription] = React.useState('')\n    const currentUser = React.useContext(CurrentUserContext);\n\n    function handleNameChange(e) {\n        setName(e.target.value);\n      }\n\n    function handleAboutChange(e) {\n        setDescription(e.target.value);\n      }\n\n    React.useEffect(() => {\n        setName(currentUser.name);\n        setDescription(currentUser.about);\n    }, [currentUser, isOpen])\n\n    function handleSubmit(e) {\n        e.preventDefault();\n        onUpdateUser({\n            name: name,\n            about: description,\n          });\n\n    }\n\n\n    return (\n        <PopupWithForm isOpen={isOpen} onClose={onClose} buttonText={buttonText} handleSubmit={handleSubmit} title=\"Редактировать профиль\" name=\"edit_profile\">\n            <input type=\"text\" className=\"form__text\" name=\"text_name\" placeholder=\"Введите имя\" value={name || \"\"} onChange={handleNameChange} required/>\n            <span className=\"form__error\" id=\"text_name-error\"></span>\n            <input type=\"text\" className=\"form__text\" name=\"text_job\" placeholder=\"Введите профессию\" value={description || \"\"} onChange={handleAboutChange} required/>\n            <span className=\"form__error\" id=\"text_job-error\"></span>\n        </PopupWithForm>\n    )\n}\n\nexport default PopupEditProfile;","import react from \"react\";\nimport React from \"react\";\nimport PopupWithForm from \"./PopupWithForm\";\n\nfunction PopupAddCard({ isOpen, onClose, buttonText, onAddPlace }) {\n    const [link, setLink] = React.useState('');\n    const [name, setName] = React.useState('');\n\n    function handleChangeName(e) {\n        setName(e.target.value)\n    }\n\n    function handleChangeLink(e) {\n        setLink(e.target.value)\n    }\n\n    function handleSubmit(e) {\n        e.preventDefault();\n\n        onAddPlace({\n            link: link,\n            name: name,\n        })\n    }\n\n    React.useEffect(() => {\n        setLink('');\n        setName('')\n\n      }, [isOpen])\n\n\n    return (\n        <PopupWithForm isOpen={isOpen} onClose={onClose} buttonText={buttonText} handleSubmit={handleSubmit} title=\"Новое место\" name=\"add_card\">\n            <input type=\"text\" className=\"form__text\" name=\"card_title\" placeholder=\"Название\" \n            onChange={handleChangeName} value={name} maxLength={30} required />\n            <span className=\"form__error\" id=\"card_title-error\"></span>\n            <input type=\"url\" className=\"form__text\" name=\"card_link\" value={link} placeholder=\"Ссылка на картинку\" onChange={handleChangeLink} required />\n            <span className=\"form__error\" id=\"card_link-error\"></span>\n        </PopupWithForm>\n    )\n}\n\nexport default PopupAddCard;","import React from \"react\";\n\nfunction ImagePopup(props) {\n    return (\n        <div className={`popup popup-img popup_type_${props.name}  ${props.card.isOpen ? 'popup-img_open' : ''}`}>\n            <div className=\"popup-img__container\">\n                <div className=\"popup-img__content\">\n                    <button type=\"button\" className=\"popup__close\" onClick={props.onClose}>\n                    </button>\n                    <figure className=\"popup-img__figure\">\n\n                        <img className=\"popup-img__img\" src={props.card.link} alt={props.card.name} />\n                        <figcaption>\n                            <p className=\"popup-img__title\">{props.card.name}</p>\n                        </figcaption>\n                    </figure>\n                </div>\n            </div>\n        </div>\n    )\n}\n\nexport default ImagePopup;","class Api {\n    constructor({endpoint, headers}){\n        this._endpoint = endpoint\n        this._headers = headers\n    }\n\n    _resStatus(res) {\n        if (res.ok) {\n            return res.json();\n        } \n          return Promise.reject(`Ошибка: ${res.status}`);\n        }\n    \n\n    getUserData() {\n        return fetch(`${this._endpoint}/users/me`, {\n            headers: this._headers\n        })\n        .then(this._resStatus);\n    }\n\n    getCardsData() {\n        return fetch(`${this._endpoint}/cards`, {\n            headers: this._headers\n        })\n        .then(this._resStatus);\n    }\n\n    updateUserData({name, about}) {\n        return fetch(`${this._endpoint}/users/me`, {\n            method: 'PATCH',\n            headers: this._headers, \n            body: JSON.stringify({\n                name: name,\n                about: about\n            })\n        })\n        .then(this._resStatus)\n    }\n\n    addCard({name, link}) {\n        return fetch(`${this._endpoint}/cards`, {\n            method: 'POST',\n            headers: this._headers, \n            body: JSON.stringify({\n                name: name,\n                link: link\n            })\n        })\n        .then(this._resStatus)\n    }\n\n    deleteCard(cardId) {\n        return fetch(`${this._endpoint}/cards/${cardId}`, {\n            method: 'DELETE',\n            headers: this._headers, \n        })\n        .then(this._resStatus)\n    }\n\n    setLike(cardId) {\n        return fetch(`${this._endpoint}/cards/likes/${cardId}`, {\n            method: 'PUT',\n            headers: this._headers, \n        })\n        .then(this._resStatus)\n    }\n\n    deleteLike(cardId) {\n        return fetch(`${this._endpoint}/cards/likes/${cardId}`, {\n            method: 'DELETE',\n            headers: this._headers, \n        })\n        .then(this._resStatus)\n    }\n\n    changeLikeCardStatus(cardId, isLiked) {\n        if (isLiked) {\n          return this.setLike(cardId) \n        } else {\n          return this.deleteLike(cardId)\n        }\n      }\n\n    updateAvatar(url) {\n        return fetch(`${this._endpoint}/users/me/avatar`, {\n            method: 'PATCH',\n            headers: this._headers, \n            body: JSON.stringify({\n                avatar: url\n            })\n        })\n        .then(this._resStatus)\n    }\n\n}\n\nconst api = new Api({\n    endpoint: 'https://mesto.nomoreparties.co/v1/cohort-29',\n    headers: {\n      authorization: '78fb05fc-0800-40e0-9053-b1d17c19d9a5',\n      'Content-type': 'application/json'\n    }\n  })\n\nexport default  api;","import React from 'react';\nimport { Navigate } from \"react-router-dom\";\n\nconst RequireAuth = ({ loggedIn, children }) => {\n  return (\n    loggedIn ? children : <Navigate to=\"/sign-in\" />\n  )\n};\n\nexport default RequireAuth;","import React from \"react\";\n\nfunction Login({ onLogin }) {\n\n    const [email, setEmail] = React.useState(\"\");\n    const [password, setPassword] = React.useState(\"\");\n\n\n    function handleSubmit(e) {\n        e.preventDefault();\n\n        onLogin({ password, email })\n\n    }\n\n    function handleChangeEmail(evt) {\n        setEmail(evt.target.value);\n    }\n\n    function handleChangePassword(evt) {\n        setPassword(evt.target.value);\n    }\n\n    return (\n        <section className=\"login\">\n            <form className=\"login__form\" onSubmit={handleSubmit}>\n                <p className=\"login__title\">Вход</p>\n                <input type=\"email\" placeholder=\"Email\" className=\"login__input\" value={email} onChange={handleChangeEmail} />\n                <input type=\"password\" placeholder=\"Пароль\" className=\"login__input\" value={password} onChange={handleChangePassword} />\n                <button className=\"login__btn\" >Войти</button>\n            </form>\n        </section>\n    )\n}\n\nexport default Login;","import React from \"react\";\nimport { Link } from \"react-router-dom\";\n\nfunction Register({ onRegister }) {\n  const [email, setEmail] = React.useState(\"\");\n  const [password, setPassword] = React.useState(\"\");\n\n\n\n  function handleSubmit(e) {\n    e.preventDefault();\n\n    onRegister({ password, email })\n\n  }\n\n  function handleChangePassword(evt) {\n    setPassword(evt.target.value);\n  }\n\n  function handleChangeEmail(evt) {\n    setEmail(evt.target.value);\n  }\n\n  return (\n    <section className=\"register\">\n      <form className=\"register__form\" onSubmit={handleSubmit}>\n        <p className=\"register__title\">Регистрация</p>\n        <input type=\"email\" placeholder=\"Email\" className=\"register__input\" value={email} onChange={handleChangeEmail} />\n        <input type=\"password\" placeholder=\"Пароль\" className=\"register__input\" value={password} onChange={handleChangePassword} />\n        <button className=\"register__btn\" >Зарегистрироваться</button>\n        <Link className=\"register__enter\" to=\"/sign-in\">Уже зарегистрировались? Войти</Link>\n      </form>\n    </section>\n  )\n}\n\nexport default Register;","const BASE_URL = 'https://auth.nomoreparties.co';\n\n\nexport const signup = ({ email, password }) => {\n  return fetch(`${BASE_URL}/signup`, {\n    method: 'POST',\n    headers:\n      { Accept: 'application/json', 'Content-Type': 'application/json' },\n    body: JSON.stringify({ email, password })\n  })\n    .then(res => res.status === 201 ? res.json() : res);\n};\n\nexport const signin = ({ email, password }) => {\n  return fetch(`${BASE_URL}/signin`, {\n    method: 'POST',\n    headers: {\n      Accept: 'application/json',\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({ email, password })\n  })\n    .then(res => res.json())\n    .then(data => {\n      if (data.token) {\n        localStorage.setItem('jwt', data.token);\n        localStorage.setItem('email', email);\n      }\n\n      return data;\n    });\n};\n\n\nexport const checkToken = (token) => {\n  return fetch(`${BASE_URL}/users/me`, {\n    method: 'GET',\n    headers: {\n      Accept: 'application/json',\n      'Content-Type': 'application/json',\n      Authorization: `Bearer ${token}`\n    }\n  })\n    .then(res => res.status === 200 ? res.json() : res);\n}\n\n","import React from \"react\";\n\nfunction InfoTooltip({onClose, messagePopup, isOpen}) {\n\n    \n\n    return (\n        <div className={`popup  ${isOpen ? 'popup_open' : ''}`}>\n            <div className=\"popup__container\">\n                <button type=\"button\" className=\"popup__close\" onClick={onClose}></button>\n                <div className=\"popup__tooltip\">\n                    <img src={messagePopup.icon} className=\"popup__icon\" alt=\"Подтверждение регистрации\"/>\n                    <p className=\"popup__text\">{messagePopup.text}</p>\n                </div>\n            </div>\n        </div>\n    )\n}\n\nexport default InfoTooltip;","export default __webpack_public_path__ + \"static/media/iconAppruve.1b6082f8.svg\";","export default __webpack_public_path__ + \"static/media/iconErr.df8eddf6.svg\";","import React from 'react';\nimport Header from './Header'\nimport Main from './Main'\nimport Footer from './Footer';\nimport PopupUpdateAvatar from './PopupUpdateAvatar';\nimport PopupEditProfile from './PopupEditProfile';\nimport PopupAddCard from './PopupAddCard';\nimport ImagePopup from './ImagePopup';\nimport api from \"../utils/Api\";\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\nimport { Route, Routes, Navigate, useNavigate } from 'react-router-dom';\nimport RequireAuth from './RequireAuth';\nimport Login from './Login';\nimport Register from './Register';\nimport * as auth from \"../utils/auth\";\nimport InfoTooltip from \"./InfoTooltip\";\nimport iconAppruve from \"../images/iconAppruve.svg\"\nimport iconErr from \"../images/iconErr.svg\"\n\n\nfunction App() {\n\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = React.useState(false);\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = React.useState(false);\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false);\n  const [selectedCard, setSelectedCard] = React.useState({});\n  const [currentUser, setCurrentUser] = React.useState({});\n  const [cards, setCards] = React.useState([]);\n  const [isInfoTooltipOpen, setIsTooltipOpen] = React.useState(false)\n\n\n  const [loggedIn, setLoggedIn] = React.useState(false);\n  const [email, setEmail] = React.useState('');\n  const [messagePopup, setMessagePopup] = React.useState({ icon: \"\", text: \"\" })\n  const jwt = localStorage.getItem(\"jwt\")\n  const nav = useNavigate()\n\n\n\n  //описание авторизации\n  function onLogin({ password, email }) {\n    return auth.signin({ password, email })\n      .then((data) => {\n        //если получили токен и авторизация прошла успешно\n        //то открывается окно подтверждения и переадресовывает на главную страницу\n\n        if (data.token) {\n          handleInfoTooltipOpen({\n            icon: iconAppruve,\n            text: \"Вы успешно авторизовались!\",\n          })\n          handleIsTooltipOpen()\n          setEmail(email);\n          setLoggedIn(true);\n          localStorage.setItem('jwt', data.token);\n          localStorage.setItem('email', email);\n          nav('/');\n        }\n        else {\n          handleInfoTooltipOpen({\n            icon: iconErr,\n            text: \"Что-то пошло не так! Попробуйте ещё раз.\",\n          })\n          handleIsTooltipOpen();\n        }\n      })\n      .catch((err) => {\n        console.log(err)\n      });\n  }\n\n  //описание регистрации\n  function onRegister({ password, email }) {\n    return auth.signup({ password, email })\n      .then((data) => {\n        if (data.data._id) {\n          handleInfoTooltipOpen({\n            icon: iconAppruve,\n            text: \"Вы успешно зарегистрировались!\",\n          })\n          handleIsTooltipOpen()\n          nav('/sign-in')\n        }\n      })\n      .catch((err) => {\n        handleInfoTooltipOpen({\n          icon: iconErr,\n          text: \"Что-то пошло не так! Попробуйте ещё раз.\",\n        })\n        handleIsTooltipOpen();\n        console.log(err)\n      });\n  }\n\n  //состояние данных подтверждения регистрации\n  function handleInfoTooltipOpen({ icon, text }) {\n    setMessagePopup({ icon, text });\n  }\n\n  //выход\n  function handleSignOut() {\n    setLoggedIn(false);\n    localStorage.removeItem(\"jwt\");\n    localStorage.removeItem('email');\n    setEmail('');\n    nav('/sign-in');\n  }\n\n  React.useEffect(() => {\n    if (jwt) {\n      auth.checkToken(jwt)\n        .then((data) => {\n          if (data.data) {\n            setEmail(data.data.email);\n            setLoggedIn(true);\n            nav('/')\n          }\n        })\n        .catch((err) => {\n          console.log(err)\n        });\n    }\n  }, [])\n\n  React.useEffect(() => {\n    if (loggedIn) {\n      api.getUserData()\n      .then((data) => {\n        setCurrentUser(data)\n      })\n      .catch((err) => {\n        console.log(err)\n      });\n    }\n  }, [loggedIn])\n\n  React.useEffect(() => {\n    if (loggedIn) {\n      api.getCardsData()\n      .then((data) => {\n        setCards(data)\n      })\n      .catch((err) => {\n        console.log(err)\n      })\n    }\n  }, [loggedIn])\n\n\n\n  function handleCardLike(card) {\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\n\n    api.changeLikeCardStatus(card._id, !isLiked)\n      .then((newCard) => {\n        setCards((state) => state.map((c) => c._id === card._id ? newCard : c));\n      })\n      .catch((err) => {\n        console.log(err)\n      });\n  }\n\n\n  function handleCardDelete(card) {\n    api.deleteCard(card._id)\n      .then(() => {\n        const newCard = cards.filter((c) => c !== card);\n        setCards(newCard)\n      })\n      .catch((err) => {\n        console.log(err)\n      });\n  }\n\n\n\n\n\n  function handleEditAvatarClick() {\n    setIsEditAvatarPopupOpen(true)\n  }\n\n  function handleEditProfileClick() {\n    setIsEditProfilePopupOpen(true)\n  }\n\n  function handleAddPlaceClick() {\n    setIsAddPlacePopupOpen(true)\n  }\n\n  function closeAllPopups() {\n    setIsEditAvatarPopupOpen(false);\n    setIsEditProfilePopupOpen(false);\n    setIsAddPlacePopupOpen(false);\n    setSelectedCard({ isOpen: false });\n    setIsTooltipOpen(false)\n  }\n\n  function handleIsTooltipOpen() {\n    setIsTooltipOpen(true)\n  }\n\n  function handleCardClick(card) {\n    card.isOpen = !card.isOpen\n    setSelectedCard(card);\n  }\n\n  function handleUpdateUser({ name, about }) {\n    api.updateUserData({ name, about })\n      .then((data) => {\n        setCurrentUser(data)\n        closeAllPopups()\n      })\n      .catch((err) => {\n        console.log(err)\n      })\n\n  }\n\n  function handleUpdateAvatar({ avatar }) {\n    api.updateAvatar(avatar)\n      .then((data) => {\n        setCurrentUser(data)\n        closeAllPopups()\n      })\n      .catch((err) => {\n        console.log(err)\n      })\n  }\n\n  function handleAddPlaceSubmit({ name, link }) {\n    api.addCard({ name, link })\n      .then((newCard) => {\n        setCards([newCard, ...cards]);\n        closeAllPopups()\n      })\n      .catch((err) => {\n        console.log(err)\n      })\n  }\n\n\n\n\n\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n\n      <div className=\"page\">\n        <Header loggedIn={loggedIn} email={email} handleSignOut={handleSignOut} />\n        <Routes>\n          <Route path=\"/sign-up\" element={<Register onRegister={onRegister} />} />\n          <Route path=\"/sign-in\" element={<Login onLogin={onLogin} />} />\n          <Route exact path=\"/\" element={!loggedIn ? <Navigate to=\"/sign-in\" /> : <Navigate to=\"/main\" />} />\n          <Route path=\"/main\" element={\n            <RequireAuth loggedIn={loggedIn}>\n              <Main\n                onEditProfile={handleEditProfileClick}\n                onAddPlace={handleAddPlaceClick}\n                onEditAvatar={handleEditAvatarClick}\n                onCardClick={handleCardClick}\n                cards={cards}\n                onCardLike={handleCardLike}\n                onCardDelete={handleCardDelete} />\n            </RequireAuth>} />\n        </Routes>\n        <PopupUpdateAvatar\n          isOpen={isEditAvatarPopupOpen}\n          onClose={closeAllPopups}\n          onUpdateUser={handleUpdateAvatar}\n          buttonText=\"Сохранить\" />\n        <PopupEditProfile\n          isOpen={isEditProfilePopupOpen}\n          onClose={closeAllPopups}\n          onUpdateUser={handleUpdateUser}\n          buttonText=\"Сохранить\" />\n        <PopupAddCard\n          isOpen={isAddPlacePopupOpen}\n          onClose={closeAllPopups}\n          onAddPlace={handleAddPlaceSubmit}\n          buttonText=\"Сохранить\" />\n        <ImagePopup\n          card={selectedCard}\n          onClose={closeAllPopups} />\n        <InfoTooltip\n          onClose={closeAllPopups}\n          isOpen={isInfoTooltipOpen}\n          messagePopup={messagePopup} />\n        <Footer />\n      </div>\n\n    </CurrentUserContext.Provider>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\nimport reportWebVitals from './reportWebVitals';\nimport { BrowserRouter } from 'react-router-dom'\n\nReactDOM.render(\n  <React.StrictMode>\n          <BrowserRouter>\n            <App />\n          </BrowserRouter>\n    \n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}